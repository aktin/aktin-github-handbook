<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.8.1 at 2025-06-16 
 | Rendered using Apache Maven Fluido Skin 1.5
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20250616" />
    <meta http-equiv="Content-Language" content="en" />
    <title>AKTIN : DWH Server &#x2013; </title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.5.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.5.min.js"></script>

                      </head>
        <body class="topBarDisabled">
          
        
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2>AKTIN : DWH Server</h2>
                </div>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
              
                  <li id="publishDate">Last Published: 2025-06-16
                      <span class="divider">|</span>
                   </li>
                  <li id="projectVersion">Version: 1.6rc1
                      </li>
                      
              
      
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
              
                <ul class="nav nav-list">
                    <li class="nav-header">Import, CDA und Schnittstelle</li>
                              
      <li>
  
                          <a href="../../0.18/dwh-import/index.html" title="DHW-Import und Schnittstelle">
          <span class="none"></span>
        DHW-Import und Schnittstelle</a>
            </li>
                              <li class="nav-header">Übersicht</li>
                              
      <li>
  
                          <a href="index.html" title="AKTIN Übersicht">
          <span class="none"></span>
        AKTIN Übersicht</a>
            </li>
                              <li class="nav-header">Installation</li>
                              
      <li>
  
                          <a href="install-requirements.html" title="Server-Installation">
          <span class="none"></span>
        Server-Installation</a>
            </li>
                
      <li class="active">
  
            <a href="#"><span class="none"></span>AKTIN Installation</a>
          </li>
                
      <li>
  
                          <a href="install-docker.html" title="Docker Installation">
          <span class="none"></span>
        Docker Installation</a>
            </li>
                              <li class="nav-header">Updates und Patches</li>
                              
      <li>
  
                          <a href="update-migration.html" title="Migration von Debian 8/CentOS 7">
          <span class="none"></span>
        Migration von Debian 8/CentOS 7</a>
            </li>
                
      <li>
  
                          <a href="update-script.html" title="Update von der Version 1.3/1.4">
          <span class="none"></span>
        Update von der Version 1.3/1.4</a>
            </li>
                
      <li>
  
                          <a href="update-auto.html" title="Update ab der Version 1.5">
          <span class="none"></span>
        Update ab der Version 1.5</a>
            </li>
                              <li class="nav-header">Sonstiges</li>
                              
      <li>
  
                          <a href="network.html" title="Netzwerk-Einstellungen">
          <span class="none"></span>
        Netzwerk-Einstellungen</a>
            </li>
                
      <li>
  
                          <a href="file-import-p21.html" title="Import von fallbasierten Behandlungsdaten">
          <span class="none"></span>
        Import von fallbasierten Behandlungsdaten</a>
            </li>
                              <li class="nav-header">Changelog</li>
                              
      <li>
  
                          <a href="changelog.html" title="Changelog">
          <span class="none"></span>
        Changelog</a>
            </li>
            </ul>
              
                
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span10" >
                                  
            <div class="section">
<div class="section">
<h3><a name="Installation_und_Konfiguration_des_AKTIN_Data_Warehouse"></a><u>Installation und Konfiguration des AKTIN Data Warehouse</u></h3>
<p>Auf dieser Seite wird der Prozess der Installation und Konfiguration des AKTIN DWH beschrieben. Die AKTIN-DWH-Software steht derzeit nur als Debian Paket zur Verf&#xfc;gung und wurde nur unter Ubuntu 20.04 Server LTS getestet. Wenn Sie eine andere Distribution verwenden m&#xf6;chten, kontaktieren Sie den <a class="externalLink" href="mailto:it-support@aktin.org">AKTIN IT-Support</a>. Bei einer Neuinstallation beachten Sie bitte die Hinweise unter der Seite <a href="install-requirements.html">Server-Installation</a>.</p>

<ul>
<li><a href="#Vorbereitung_der_Installation">Vorbereitung der Installation</a>
<ul>
<li><a href="#Freischaltung_von_root">Freischaltung von root</a></li>
<li><a href="#Freischaltung_der_Server-Adressen">Freischaltung der Server-Adressen</a></li>
<li><a href="#Aktualisierung_der_Zertifkate">Aktualisierung der Zertifkate</a></li>
<li><a href="#AKTIN_Repository_einbinden">AKTIN Repository einbinden</a></li></ul></li>
<li><a href="#Installation_der_AKTIN-DWH-Software">Installation der AKTIN-DWH-Software</a></li>
<li><a href="#Konfiguration_und_lokale_Einstellungen">Konfiguration und lokale Einstellungen</a></li>
<li><a href="#Einstellungen_in_der_i2b2-Adminoberflche">Einstellungen in der i2b2-Adminoberfl&#xe4;che</a></li>
<li><a href="#Test_der_Betriebsfhigkeit">Test der Betriebsf&#xe4;higkeit</a>
<ul>
<li><a href="#Data_Warehouse">Data Warehouse</a></li>
<li><a href="#CDA_Importschnittstelle">CDA Importschnittstelle</a></li>
<li><a href="#Verbindung_und_E-Mail-Konfiguration">Verbindung und E-Mail-Konfiguration</a></li></ul></li>
<li><a href="#Betrieb_des_AKTIN_Data_Warehouse">Betrieb des AKTIN Data Warehouse</a></li>
<li><a href="#Weitere_Anmerkungen">Weitere Anmerkungen</a></li></ul>
<p><br /></br></p>

<div class="section">
<h4><a name="Vorbereitung_der_Installation"></a>Vorbereitung der Installation</h4>

<div class="section">
<h5><a name="Freischaltung_von_root"></a>Freischaltung von root</h5>
<p>F&#xfc;r die Installation des AKTIN DWH brauchen Sie einen Konsolenzugang zum Server sowie empfehlenswert die Rechte des Nutzers <tt>root</tt>. Standardm&#xe4;&#xdf;ig ist dieser Nutzer seit Ubuntu 14.04 deaktiviert. Um ihn zu reaktivieren, wechseln Sie zun&#xe4;chst zu einer <tt>root</tt>-Sitzung &#xfc;ber den Befehl</p>

<div class="source">
<div class="source"><pre class="prettyprint">sudo -i
</pre></div></div>
<p>und geben Sie das Passwort des aktiven Nutzers an. Anschlie&#xdf;end k&#xf6;nnen Sie &#xfc;ber den Befehl</p>

<div class="source">
<div class="source"><pre class="prettyprint">sudo passwd root
</pre></div></div>
<p>den Nutzer <tt>root</tt> wieder reaktivieren. Daf&#xfc;r werden Sie aufgefordert, f&#xfc;r <tt>root</tt> ein neues Passwort festzulegen und dies zu best&#xe4;tigen. Haben Sie das Passwort festgelegt, k&#xf6;nnen Sie sich nach einem Abmelden mit dem Nutzer <tt>root</tt> anmelden.</p>
</div>
<div class="section">
<h5><a name="Freischaltung_der_Server-Adressen"></a>Freischaltung der Server-Adressen</h5>
<p>Das AKTIN DWH braucht Zugriff auf folgende Server. Stellen Sie sicher, dass diese Adresse nicht von Ihrer Firewall blockiert bzw. zu den Ausnahmen hinzugef&#xfc;gt werden. </p>

<table border="0" class="table table-striped" style="width:70%;">
<thead>

<tr class="a">
    
<th style="width:20%;">Zugriff</th>
    
<th style="width:30%;">Server</th>
    
<th style="width:20%;">IP-Adresse</th>
    
<th style="width:15%;">HTTP</th>
    
<th style="width:15%;">HTTPS</th>
</tr>
</thead>
<tbody>

<tr class="b">
  
<td>Installation</td>
    
<td>de.archive.ubuntu.com</td>
    
<td>141.30.62.23</td>
    
<td>80/tcp</td>
    
<td>-</td>
</tr>

<tr class="a">
  
<td>Installation und Betrieb</td>
    
<td>aktin.org</td>
    
<td>188.68.47.138</td>
    
<td>-</td>
    
<td>443/tcp oder 8443/tcp</td>
</tr>

<tr class="b">
  
<td>Betrieb</td>
    
<td>aktin-broker.klinikum.rwth-aachen.de</td>
    
<td>134.130.15.160</td>
    
<td>-</td>
    
<td>443/tcp</td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<h5><a name="Aktualisierung_der_Zertifkate"></a>Aktualisierung der Zertifkate</h5>
<p>Stellen Sie sicher, dass Ihr Ubuntu-Server die aktuellesten Zertifikate besitzt. Anderenfalls kann ein Zugriff auf das AKTIN Repository mit den Installationspaketen fehlschlagen. Die Zertifikate k&#xf6;nnen Sie &#xfc;ber folgenden Befehl aktualisieren.</p>

<div class="source">
<div class="source"><pre class="prettyprint">apt-get update &amp;&amp; apt-get install -y ca-certificates
</pre></div></div>
</div>
<div class="section">
<h5><a name="AKTIN_Repository_einbinden"></a>AKTIN Repository einbinden</h5>
<p>Um das AKTIN DWH installieren zu k&#xf6;nnen, m&#xfc;ssen Sie zun&#xe4;chst das AKTIN Repository zu Ihrem Ubuntu-Server hinzuf&#xfc;gen. F&#xfc;gen Sie zun&#xe4;chst den Repository-Schl&#xfc;ssel hinzu:</p>

<div class="source">
<div class="source"><pre class="prettyprint">sudo wget -O - https://www.aktin.org/software/repo/org/apt/conf/aktin.gpg.key | sudo gpg --dearmour -o /etc/apt/trusted.gpg.d/aktin.gpg
</pre></div></div>
<p>Anschlie&#xdf;end k&#xf6;nnen Sie die Repository-Quelle einbinden:</p>

<div class="source">
<div class="source"><pre class="prettyprint">echo &quot;deb https://www.aktin.org/software/repo/org/apt jammy main&quot; | sudo tee /etc/apt/sources.list.d/aktin.list
</pre></div></div>
<p><b>Hinweis</b>: Das Paket wurde nur mit Ubuntu 22.04 LTS getestet und verifiziert.</p>
<p><br /></br></p>
</div></div>
<div class="section">
<h4><a name="Installation_der_AKTIN-DWH-Software"></a>Installation der AKTIN-DWH-Software</h4>
<p>Haben Sie alle Vorbereitungen f&#xfc;r die Installation abgeschlossen, k&#xf6;nnen Sie das AKTIN DWH &#xfc;ber folgende drei Befehle installieren:</p>

<div class="source">
<div class="source"><pre class="prettyprint">apt-get update

apt-get install -y aktin-notaufnahme-i2b2
apt-get install -y aktin-notaufnahme-dwh
apt-get install -y aktin-notaufnahme-updateagent
</pre></div></div>
<p>Das Paket <tt>aktin-notaufnahme-i2b2</tt> installiert den f&#xfc;r den Betrieb des DWH ben&#xf6;tigten Applikationsserver und die Datenbank. Zus&#xe4;tzlich wird ein <tt>apache2</tt>-Server installiert, der im Betrieb als <i>Reverse Proxy</i> fungiert. Das Paket <tt>aktin-notaufnahme-dwh</tt> enth&#xe4;lt die eigentliche Data Warehouse-Software. In der Regel ist dies das Paket, das im Laufe der Zeit von dem AKTIN Team weiterentwickelt wird und aktualisiert werden muss. Das letzte Paket <tt>aktin-notaufnahme-updateagent</tt> enth&#xe4;lt zwei Ubuntu-Services, die es erm&#xf6;glichen, den Prozess f&#xfc;r die Aktualisierung des Paketes <tt>aktin-notaufnahme-dwh</tt> &#xfc;ber die Oberfl&#xe4;che des AKTIN DWH durchzuf&#xfc;hren. Dieses Paket ist optional und ist f&#xfc;r den Betrieb des DWH nicht notwendig.</p>
<p>Insgesamt werden im Laufe der Installation folgende Pakete installiert und konfiguriert:</p>

<table border="0" class="table table-striped" style="width:40%;">
<thead>
  
<tr class="a">
    
<th>Software</th>
    
<th>Version</th>
    
<th>Paket(e)</th>
  </tr>
</thead>
<tbody>
  
<tr class="b">
    
<td>Wildfly</td>
    
<td>22.0.1.Final</td>
    
<td>-</td>
  </tr>
  
<tr class="a">
    
<td>Postgres Datenbank Server</td>
    
<td>14.15</td>
    
<td>postgresql-14</td>
  </tr>
  
<tr class="b">
    
<td>Apache2</td>
    
<td>2.4.52</td>
    
<td>apache2</td>
  </tr>
  
<tr class="a">
    
<td>Java Runtime Environment</td>
    
<td>11.0.25</td>
    
<td>openjdk-11-jre-headless</td>
  </tr>
  
<tr class="b">
    
<td>PHP</td>
    
<td>8.1.2</td>
    
<td>
<p>php</p>
    
<p>php-common</p>
    
<p>libapache2-mod-php</p>
    
<p>php-curl</p></td>
  </tr>
  
<tr class="a">
    
<td>R</td>
    
<td>4.1.2</td>
    
<td>
<p>r-base-core</p>
    
<p>r-cran-xml</p>
    
<p>r-cran-lattice</p>
    
<p>libcurl4-openssl-dev</p>
	
<p>libssl-dev</p>
	
<p>libxml2-dev</p>
    
<p>tidyverse</p></td>
  </tr>
  
<tr class="b">
    
<td>Python</td>
    
<td>3.10.12</td>
    
<td>
<p>python3</p>
    
<p>python3-pandas</p>
    
<p>python3-numpy</p>
    
<p>python3-requests</p>
    
<p>python3-sqlalchemy</p>
    
<p>python3-psycopg2</p>
    
<p>python3-postgresql</p>
    
<p>python3-zipp</p>
    
<p>python3-plotly</p>
    
<p>python3-gunicorn</p></td>
  </tr>
</tbody>
</table>
<p><br /></br></p>
</div>
<div class="section">
<h4><a name="Konfiguration_und_lokale_Einstellungen"></a>Konfiguration und lokale Einstellungen</h4>
<p>Nach Abschluss der Installation und vor Start der Anwendung ist es unbedingt notwendig, die Datei <tt>aktin.properties</tt> an die Anforderungen Ihres Systems zu konfigurieren. Die Datei befindet sich im Verzeichnis <tt>/opt/wildfly/standalone/configuration/aktin.properties</tt>. In dieser Datei werden Angaben zum lokalen DWH und Standort-spezifische &#xc4;nderungen gemacht. F&#xfc;r das Anpassen der Datei <tt>aktin.properties</tt> muss folgender Befehl ausgef&#xfc;hrt werden:</p>

<div class="source">
<div class="source"><pre class="prettyprint">nano /opt/wildfly/standalone/configuration/aktin.properties
</pre></div></div>
<p>Wichtig ist hierbei das Feld <tt>local.email</tt>, in das die E-Mail-Adresse eingetragen wird. An diese eingetragene Adresse werden sp&#xe4;ter Berichte und Meldungen geschickt. Es ist auch m&#xf6;glich, eine Liste von E-Mailadressen anzugeben, an die der Bericht gesendet werden soll (wie z.B. alle Ober&#xe4;rzte der Notaufnahme). In diesem Fall m&#xfc;ssen die Eintr&#xe4;ge komma-separiert ohne Leerzeichen erfolgen.</p>
<p>Auch sollten Sie unter dem Feld <tt>broker.keys</tt> den alphanumerischen API-Key eintragen, der Ihnen zugesendet wurde. Sollten Sie noch keinen Key bekommen haben, melden Sie sich bitte bei <a class="externalLink" href="mailto:it-support@aktin.org">it-support@aktin.org</a>.</p>
<p>Weiterhin ist es auch wichtig, die Felder f&#xfc;r die Email-Konfiguration am Ende der Datei entsprechend zu bef&#xfc;llen. In diesen Feldern wird die E-Mail-Konfiguration f&#xfc;r die Ausgangsmailadresse vorgenommen, welche f&#xfc;r hausinterne Benachrichtigungen und Berichte verwendet werden soll (z.B. f&#xfc;r den Versand von monatlich erzeugten Berichtsdokumente an die angegebene Emf&#xe4;nger-Adresse). Die Sender-Adresse sollte eine dedizierte E-Mail-Adresse (Dienstkonto mit festem Passwort oder Funktions-E-Mail-Adresse) sein. Eine funktionst&#xfc;chtige E-Mail-Adresse ist Voraussetzung f&#xfc;r die Installation.</p>
<p>Welche Wirkung die jeweiligen Felder haben, finden Sie in diesem Abschnitt in der Template-Datei:</p>

<div class="source">
<div class="source"><pre class="prettyprint"># name of the installation
local.cn=AKTIN DWH

# used in AKTIN reports, should contain the name of the Organization (Hospital)
local.o=Ev. Klinikum Beispielhausen

# used in AKTIN reports, should contain the name of the Unit (Notaufnahme, Rettungsstelle, ZNA, etc.)
local.ou=Notaufnahme

# town
local.l=Beispielhausen

# state
local.s=Niedersachen

# country
local.c=Deutschland

# default e-mail-adress for notifications, reports (non technical); multiple adresses possible (comma separated in one line without empty space)
local.email=zna-contact@klinikum-beipielhausen.de
local.tz=Europe/Berlin

# language tag according to IETF BCP 47. If not defined, the system language will be used.
local.language=de-DE

# location of the R standalone executable
rscript.binary=/usr/bin/Rscript

# needed for read/write access to the i2b2 database
i2b2.project=AKTIN
i2b2.datasource.crc=java:/QueryToolDemoDS

# needed for i2b2 authentication and user management
i2b2.service.pm=http://localhost:9090/i2b2/services/PMService/
i2b2.service.domain=i2b2demo

# broker and report paths
report.data.path=/var/lib/aktin/reports
report.temp.path=/var/tmp/report-temp
report.archive.path=/var/lib/aktin/report-archive
report.debug.keeptempfiles=false
broker.data.path=/var/lib/aktin/broker
broker.archive.path=/var/lib/aktin/broker-archive
broker.uris=https://aktin-broker.klinikum.rwth-aachen.de/broker/
broker.intervals=PT15M

# file import data and script paths, interval to check script timeout
import.data.path=/var/lib/aktin/import
import.script.path=/var/lib/aktin/import-scripts
import.script.check.interval=10800000

# used in AKTIN to connect to the broker, you can get your API key from it-support@aktin.org
broker.keys=XXXyourapikeyXXX
db.datasource=java:jboss/datasources/AktinDS
wildfly.management.url=http://localhost:9990/management
wildfly.management.user=admin
wildfly.management.password=admin2

# patient reference, allowed values: Patient, Encounter, Billing
study.id.reference=Patient

# root numbers of the different reference types. Can be empty.
cda.patient.root.preset=1.2.276.0.76.4.8
cda.encounter.root.preset=1.2.276.0.76.3.87686
cda.billing.root.preset=1.2.276.0.76.3.87686.1.45

# label for the extension textfield of the consent-manager, based on the reference type.
study.id.patient.label=Patientennr.
study.id.encounter.label=Episodennummer
study.id.billing.label=Fallnummer

# character for separating root and extension in case of manual setting. Will be applied if root is not set in properties.
study.id.separator=/

# log function for imported CDAs: all imported CDAs are stored as a file (Allowed values: 'all','info' or 'none')
import.cda.debug.dir=/tmp/
import.cda.debug.level=none
import.cda.fhir.outcome.level=info

# mail server via java, use configuration below
email.session=local

# adress received mails will reply to
mail.x.replyto=it-support@aktin.org

# mail server protocol
mail.transport.protocol=smtp

# mail server name
mail.smtp.host=smtp.gmail.com

# mail server port, e.g. 465 (SSL) or 587 (TLS), or 25 (no auth)
mail.smtp.port=587

# mail server authentification, false for &quot;no login is needed&quot;
mail.smtp.auth=true

# user name for authentication (this name is displayed as addressor of every mail)
mail.user=userforssending

# password for authentication
mail.x.password=passwordforsending

# security configuration
mail.smtp.starttls.enable=true

# connection timeout
mail.smtp.timeout=10000
mail.smtp.connectiontimeout=10000

</pre></div></div>
<p>F&#xfc;r Kliniken, die die Root-ID aus dem Beispiel-CDA &#xfc;bernommen haben (z.B. mit einer E.Care-Schnittstelle) und f&#xfc;r den Consent-Manager die Patientennummer verwenden (empfohlene Einstellung), m&#xfc;ssen keine weiteren &#xc4;nderungen vorgenommen werden. Die Einstellungen in <tt>aktin.properties</tt> sind bereits korrekt eingestellt.</p>
<p>F&#xfc;r Kliniken mit einer AGFA-Schnittstelle muss lediglich die Patientennummer ge&#xe4;ndert werden. Suchen Sie hierf&#xfc;r in der Datei <tt>aktin.properties</tt> die Zeile</p>

<div class="source">
<div class="source"><pre class="prettyprint">cda.patient.root.preset=1.2.276.0.76.4.8
</pre></div></div>
<p>heraus und &#xe4;ndern Sie den Wert auf <tt>1.2.276.0.76.4.17.9814184919</tt>.</p>
<p>Sollten Sie die Fallnummer oder die Encounter-Nummer statt der Patientennummer f&#xfc;r den Consent-Manager verwenden wollen und/oder Ihr KIS-Anbieter weder AGFA noch die Beispiel-Root-IDs &#xfc;bernommen haben, so befolgen Sie bitte die folgende Anleitung und halten Sie gegebenenfalls R&#xfc;cksprache mit <a class="externalLink" href="mailto:it-support@aktin.org">it-support@aktin.org</a>:</p>
<p>F&#xfc;r den Ein- oder Ausschluss von Patienten im Consent-Manager (weitere Informationen zu diesem Feature finden Sie in der Benutzeranleitung) wird eine Identifikationsnummer des Patienten ben&#xf6;tigt. Hierf&#xfc;r stehen drei verschiedene Nummern zur Verf&#xfc;gung: Patientennummer (<tt>Patient</tt>), Episodennummer (<tt>Encounter</tt>) und Fallnummer (<tt>Billing</tt>). Unter dem Feld <tt>study.id.reference</tt> muss die entsprechende Referenz eingetragen werden. Wir empfehlen Ihnen, die Patientennummer (<tt>Patient</tt>) zu benutzen, da im Gegensatz zu den anderen beiden Nummern diese f&#xfc;r jeden Patienten einzigartig ist. Zum aktuellen Zeitpunkt findet bei der Eintragung eines Ein- oder Ausschlusses keine &#xdc;berpr&#xfc;fung statt, ob der Patient bereits mit einer anderen Episoden- oder Fallnummer eingetragen wurde, sodass es gegebenenfalls zu Dubletten kommen kann, wenn nicht die Patientennummer genutzt wird.</p>
<p>F&#xfc;r jede dieser Nummern gibt es i.d.R. eine feste Root-Nummer, die unter den Feldern <tt>cda.patient.root.preset</tt>, <tt>cda.encounter.root.preset</tt> bzw. <tt>cda.billing.root.preset</tt> hinterlegt werden kann. Dadurch muss die Root-Nummer nicht bei jedem Ein- bzw. Ausschluss angegeben werden und die Angabe der patienten-, episoden- oder fallbezogenen Nummer, die auch im Krankenhausinformationssystem sichtbar ist (die sogenannte Extension-Nummer), ist ausreichend.</p>
<p>Um herauszufinden, welche dieser Nummern &#xfc;ber die AKTIN-Schnittstelle in das Data-Warehouse &#xfc;bertragen werden und somit in den Einstellungen angegeben werden k&#xf6;nnen, ben&#xf6;tigen Sie Zugriff auf ein CDA-Dokument. Dieses wird als Datenstruktur zur &#xdc;bertragung der Daten aus dem Notaufnahme-System in das klinikinterne Data Warehouse verwendet. Ein gek&#xfc;rztes CDA-Beispieldokument sieht wie folgt aus:</p>
<p><img src="properties/cda-ids.png" alt="img1" /></img></p>
<p>Hier befinden sich die jeweiligen Root- und Extension-Nummern der Referenzen. Bei der ersten ID unter <tt>encompassingEncounter</tt> ist die Episodennummer zu finden. Die zweite ID steht f&#xfc;r die Fallnummer. Die Patientennummer ist unter <tt>patientRole.id</tt> zu finden. Pr&#xfc;fen Sie, welche dieser Nummern dem Notaufnahme-Personal bekannt ist, d.h. welche der Nummern mit der im Krankenhausinformationssystem &#xfc;bereinstimmt. Tragen Sie von dieser Nummer die im CDA-stehende Root-Nummer in die Datei <tt>aktin.properties</tt> ein und geben die entsprechende Referenz (<tt>Patient</tt>, <tt>Encounter</tt> oder <tt>Billing</tt>) an.</p>
<p>Sollte in der Klinik keine feste Root-Nummer verwendet werden, darf auch keine Root-Nummer in <tt>aktin.properties</tt> hinterlegt werden &#x2013; lassen Sie das Feld in diesem Fall einfach leer. Dies kann der Fall sein, wenn entweder die Extension-Nummer direkt als Root-Nummer verwendet wird oder sich die Root-Nummer klinikintern unterscheidet. Im ersteren Fall tragen Sie im Consent-Manager ganz normal die Identifikationsnummer ein, welche dann als Root-Nummer erkannt wird. Im letzteren Fall geben Sie unter <tt>study.id.separator</tt> ein Trennzeichen ein und tragen im Consent-Manager die Root-Nummer und die Extension-Nummer mit dem definierten Trennzeichen dazwischen ein.</p>
<p>Nachdem Sie die Datei <tt>aktin.properties</tt> konfiguriert und abgespeichert haben, muss der Wildfly-Server neugestartet werden. Im Zuge der Installation wurden bereits alle Komponenten des AKTIN Data Warehouse automatisch gestartet. F&#xfc;hren Sie also den Befehl</p>

<div class="source">
<div class="source"><pre class="prettyprint">service wildfly restart
</pre></div></div>
<p>aus, um den Server neuzustarten und die neuen Einstellungen in den Wildfly-Server einzulesen. Haben Sie die Installation erfolgreich abgeschlossen und die Datei <tt>aktin.properties</tt> entsprechend konfiguriert und eingespielt, ist das AKTIN Data Warehouse nun einsatzbereit.</p>
<p>F&#xfc;r nachtr&#xe4;gliche &#xc4;nderungen an <tt>aktin.properties</tt> beachten Sie die Hinweise im Abschnitt <a href="install-script.html#Weitere_Anmerkungen">Weitere Anmerkungen</a>. <br /></br></p>
</div>
<div class="section">
<h4><a name="Einstellungen_in_der_i2b2-Adminoberflche"></a>Einstellungen in der i2b2-Adminoberfl&#xe4;che</h4>
<p>Falls Sie den Data-Warehouse-Manager mit einem Benutzer verwenden wollen, der kein i2b2-Admin ist (d.h. keinen Zugriff auf die i2b2-Adminoberfl&#xe4;che unter <tt>http://&lt;IHR SERVER&gt;/webclient</tt> hat), sind noch die folgenden zwei Schritte f&#xfc;r einen erfolgreichen Login in den Data Warehouse-Manager notwendig:</p>

<ol style="list-style-type: decimal">
  
<li>
<p>Die Zuordnung des Nutzers zum AKTIN-Projekt</p></li>
  
<li>
<p>Die Zuweisung einer AKTIN-Rolle an den Benutzer</p></li>
</ol>
<p>Das genaue Vorgehen hierf&#xfc;r k&#xf6;nnen Sie in den letzten beiden Abschnitten <b>Benutzer einem Projekt hinzuf&#xfc;gen</b> und <b>AKTIN-Rolle zuweisen</b> der <a class="externalLink" href="https://www.na-register.de/de-de/support/anwender.html">i2b2-Benutzeranleitung</a> nachlesen. <br /></br></p>
</div>
<div class="section">
<h4><a name="Test_der_Betriebsfhigkeit"></a>Test der Betriebsf&#xe4;higkeit</h4>
<p>Nach der Installation der AKTIN-DWH-Software ist es anzuraten, dessen Betriebsf&#xe4;higkeit zu testen. Im folgenden Bereich k&#xf6;nnen Sie Methoden und Funktionalit&#xe4;ten f&#xfc;r die Verifikation der Betriebsf&#xe4;higkeit entnehmen.</p>

<div class="section">
<h5><a name="Data_Warehouse"></a>Data Warehouse</h5>
<p>Wenn die Installation erfolgreich durchgef&#xfc;hrt wurde, kann anschlie&#xdf;end per Webbrowser auf das integrierte Data Warehouse zugegriffen werden. In der Adresszeile muss die entsprechende IP-Adresse/Servername angepasst werden: <tt>http://&lt;IHR SERVER&gt;/webclient/</tt></p>
</div>
<div class="section">
<h5><a name="CDA_Importschnittstelle"></a>CDA Importschnittstelle</h5>
<p>Die Importschnittstelle des Servers kann mit den Client-Programmen aus dem Software-Paket (ZIP) des <a class="externalLink" href="https://www.aktin.org/software/0.11/dwh-import/demo-server.html">Demo-Server</a> getestet werden:</p>

<div class="source">
<div class="source"><pre class="prettyprint">java-client-fhir.bat http://&lt;IHR SERVER&gt;/aktin/cda/fhir/Binary examples\basismodul-beispiel-storyboard01.xml
</pre></div></div>
</div>
<div class="section">
<h5><a name="Verbindung_und_E-Mail-Konfiguration"></a>Verbindung und E-Mail-Konfiguration</h5>
<p>Unter dem Link <tt>http://&lt;IHR SERVER&gt;/aktin/admin/plain/test.html</tt> lassen sich die durchgef&#xfc;hrten Anpassungen bez&#xfc;glich Broker und E-Mail sowie Reporterstellung testen.</p>
<p><img src="update_7_test/Screenshot_1.png" alt="img2" /></img></p>
<p>Der erste Button testet die Erreichbarkeit des zentralen AKTIN-Broker. Der lokale Server &#xfc;bersendet dem zentralen Broker nur Statusinformationen, wie die Serverversion und Aktivit&#xe4;t. Der zweite Button testet die eingerichtete E-Mail-Adresse. Nach Best&#xe4;tigung des Buttons wird eine E-Mail an die in <tt>aktin.properties</tt> angegebene Ziel-Adresse gesendet. Der dritte Button testet die R-Bibliotheken. Diese werden zur Erzeugung der Berichte verwendet.</p>
<p><img src="update_7_test/Screenshot_5.png" alt="img3" /></img></p>
<p>Sollte der E-Mail-Test fehlschlagen und das Textfeld zeigt keine gr&#xfc;ne Erfolgsmeldung anzeigen, k&#xf6;nnte dies ein Hinweis auf eine fehlerhafte E-Mail-Einstellung sein. In diesem Fall muss die E-Mail-Konfiguration ge&#xe4;ndert (Abschnitt <a href="install-script.html#Weitere_Anmerkungen">Weitere Anmerkungen</a>) oder die Softwarepakete erneut geladen werden.</p>
<p><img src="update_7_test/Screenshot_6.png" alt="img4" /></img></p>
</div></div>
<div class="section">
<h4><a name="Betrieb_des_AKTIN_Data_Warehouse"></a>Betrieb des AKTIN Data Warehouse</h4>
<p>Anleitungen zur Benutzerverwaltung sowie dem Betrieb des AKTIN- und i2b2 Data Warehouses finden Sie unter der Rubrik <a class="externalLink" href="https://aktin.org/support/">Support f&#xfc;r Anwender</a>. <br /></br></p>
</div>
<div class="section">
<h4><a name="Weitere_Anmerkungen"></a>Weitere Anmerkungen</h4>

<ul>
  
<li>
<p>Im Internet Explorer kommt es in der i2b2-Oberfl&#xe4;che zu Darstellungsfehlern. So werden z.B. keine User unter <i>Manage Users</i> angezeigt und unter <i>Manage Projects</i> sind die Projekte nicht einsehbar (sattdessen erscheint ein permanentes Ladezeichen). Dieser Fehler ist bereits bekannt, kann aber von unserer Seite aus nicht behoben werden, da i2b2 von i2b2 Foundation Inc. entwickelt wird. Wir w&#xfc;rden Sie daher bitten f&#xfc;r die Nutzerverwaltung einen anderen Browser zu verwenden (z.B. Firefox oder Chrome).</p></li>
  
<li>
<p>F&#xfc;r nachtr&#xe4;gliche &#xc4;nderungen in der Datei <tt>aktin.properties</tt> bearbeiten Sie &#xfc;ber den Befehl <tt>nano</tt> die im Wildfly-Konfigurationsordner hinterlegte Datei. Nach Abschluss der Bearbeitung, speichern Sie die &#xc4;nderungen ab und starten Sie den Wildfly-Server neu.</p></li>
</ul>

<div class="source">
<div class="source"><pre class="prettyprint">nano /opt/wildfly/standalone/configuration/aktin.properties

service wildfly restart
</pre></div></div></div></div></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                                      <p >Copyright &copy;                   2013&#x2013;2025.
          All rights reserved.    
      </p>
                </div>

        
                </div>
    </footer>
        </body>
</html>
