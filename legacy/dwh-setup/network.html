<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.8.1 at 2025-06-16 
 | Rendered using Apache Maven Fluido Skin 1.5
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20250616" />
    <meta http-equiv="Content-Language" content="en" />
    <title>AKTIN : DWH Server &#x2013; </title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.5.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.5.min.js"></script>

                      </head>
        <body class="topBarDisabled">
          
        
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2>AKTIN : DWH Server</h2>
                </div>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
              
                  <li id="publishDate">Last Published: 2025-06-16
                      <span class="divider">|</span>
                   </li>
                  <li id="projectVersion">Version: 1.6rc1
                      </li>
                      
              
      
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
              
                <ul class="nav nav-list">
                    <li class="nav-header">Import, CDA und Schnittstelle</li>
                              
      <li>
  
                          <a href="../../0.18/dwh-import/index.html" title="DHW-Import und Schnittstelle">
          <span class="none"></span>
        DHW-Import und Schnittstelle</a>
            </li>
                              <li class="nav-header">Übersicht</li>
                              
      <li>
  
                          <a href="index.html" title="AKTIN Übersicht">
          <span class="none"></span>
        AKTIN Übersicht</a>
            </li>
                              <li class="nav-header">Installation</li>
                              
      <li>
  
                          <a href="install-requirements.html" title="Server-Installation">
          <span class="none"></span>
        Server-Installation</a>
            </li>
                
      <li>
  
                          <a href="install-script.html" title="AKTIN Installation">
          <span class="none"></span>
        AKTIN Installation</a>
            </li>
                
      <li>
  
                          <a href="install-docker.html" title="Docker Installation">
          <span class="none"></span>
        Docker Installation</a>
            </li>
                              <li class="nav-header">Updates und Patches</li>
                              
      <li>
  
                          <a href="update-migration.html" title="Migration von Debian 8/CentOS 7">
          <span class="none"></span>
        Migration von Debian 8/CentOS 7</a>
            </li>
                
      <li>
  
                          <a href="update-script.html" title="Update von der Version 1.3/1.4">
          <span class="none"></span>
        Update von der Version 1.3/1.4</a>
            </li>
                
      <li>
  
                          <a href="update-auto.html" title="Update ab der Version 1.5">
          <span class="none"></span>
        Update ab der Version 1.5</a>
            </li>
                              <li class="nav-header">Sonstiges</li>
                              
      <li class="active">
  
            <a href="#"><span class="none"></span>Netzwerk-Einstellungen</a>
          </li>
                
      <li>
  
                          <a href="file-import-p21.html" title="Import von fallbasierten Behandlungsdaten">
          <span class="none"></span>
        Import von fallbasierten Behandlungsdaten</a>
            </li>
                              <li class="nav-header">Changelog</li>
                              
      <li>
  
                          <a href="changelog.html" title="Changelog">
          <span class="none"></span>
        Changelog</a>
            </li>
            </ul>
              
                
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span10" >
                                  
            <div class="section">
<div class="section">
<h3><a name="Netzwerk-Einstellungen"></a><u>Netzwerk-Einstellungen</u></h3>

<div class="section">
<h4><a name="Installation"></a>Installation</h4>
<p>F&#xfc;r die Installation des AKTIN DWH braucht das Installationsskript Zugriff auf folgende Server:</p>

<table border="0" class="table table-striped" style="width:50%;">
<thead>

<tr class="a">
    
<th style="width:40%;">Server</th>
    
<th style="width:20%;">IP-Adresse</th>
    
<th style="width:20%;">HTTP</th>
    
<th style="width:20%;">HTTPS</th>
</tr>
</thead>
<tbody>

<tr class="b">
    
<td>de.archive.ubuntu.com</td>
    
<td>141.30.62.23</td>
    
<td>80/tcp</td>
    
<td>-</td>
</tr>

<tr class="a">
    
<td>aktin.org</td>
    
<td>188.68.47.138</td>
    
<td>-</td>
    
<td>443/tcp oder 8443/tcp</td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<h4><a name="Betrieb"></a>Betrieb</h4>
<p>W&#xe4;hrend des Betriebs muss der AKTIN Server periodisch auf folgenden Server zugreifen k&#xf6;nnen:</p>

<table border="0" class="table table-striped" style="width:50%;">
<thead>

<tr class="a">
    
<th style="width:40%;">Server</th>
    
<th style="width:20%;">IP-Adresse</th>
    
<th style="width:20%;">HTTP</th>
    
<th style="width:20%;">HTTPS</th>
</tr>
</thead>
<tbody>

<tr class="b">
    
<td>aktin.org</td>
    
<td>188.68.47.138</td>
    
<td>-</td>
    
<td>443/tcp oder 8443/tcp</td>
</tr>

<tr class="a">
    
<td>aktin-broker.klinikum.rwth-aachen.de</td>
    
<td>134.130.15.160</td>
    
<td>-</td>
    
<td>443/tcp</td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<h4><a name="Weitere_Einstellungen_und_Informationen"></a>Weitere Einstellungen und Informationen</h4>

<ul>
  
<li>
<p><tt>Port 80</tt> (HTTP) wird verwendet, um intern auf das Data Warehouse sowie Konfigurationoberfl&#xe4;chen zuzugreifen.</p></li>
  
<li>
<p>Datenimporte werden per RESTful oder SOAP-Schnittstelle &#xfc;ber HTTP an <tt>/aktin/cda</tt> gesendet.</p></li>
  
<li>
<p>Zum Versenden von Benachrichtgungen muss der Server intern Emails an ausgew&#xe4;hlte lokale Adressen versenden k&#xf6;nnen. Daf&#xfc;r wird ein E-Mail-Server ben&#xf6;tigt. Tragen Sie die Konfiguration des E-Mail-Servers in <tt>/opt/wildfly/standalone/configuration/aktin.properties</tt> unter folgenden Feldern ein:</p></li>
</ul>

<div class="source">
<div class="source"><pre class="prettyprint"># mail server via java, use configuration below
email.session=local

# adress received mails will reply to
mail.x.replyto=it-support@aktin.org

# mail server protocol
mail.transport.protocol=smtp

# mail server name
mail.smtp.host=smtp.gmail.com

# mail server port, e.g. 465 (SSL) or 587 (TLS), or 25 (no auth)
mail.smtp.port=587

# mail server authentification, false for &quot;no login is needed&quot;
mail.smtp.auth=true

# user name for authentication (this name is displayed as addressor of every mail)
mail.user=userforssending

# password for authentication
mail.x.password=passwordforsending

# security configuration
mail.smtp.starttls.enable=true

# connection timeout
mail.smtp.timeout=10000
mail.smtp.connectiontimeout=10000
</pre></div></div>

<ul>
  
<li>Sofern f&#xfc;r die Authentifizierung am E-Mail-Server ein Zertifikat ben&#xf6;tigt wird, k&#xf6;nnen Sie dieses &#xfc;ber folgenden Befehl dem Java Truststore hinzuf&#xfc;gen. Anschlie&#xdf;end sollte ein Passwort-Aufforderung kommen. Sofern von Ihrer Seite kein Passwort festgelegt wurde, lautet das Standardpassword <tt>changeit</tt>. Den erfolgreichen Import k&#xf6;nnen Sie anschlie&#xdf;end &#xfc;ber den zweiten Befehl testen. Starten Sie anschlie&#xdf;en den Wildfly-Server neu.</li>
</ul>

<div class="source">
<div class="source"><pre class="prettyprint">keytool -importcert -alias [SELBSTGEW&#xc4;HLTER ALIASNAME] -file [PFAD ZUM ZERITIFIKAT] -keystore /usr/lib/jvm/java-11-openjdk-amd64/lib/security/cacerts 

keytool &#x2013;list &#x2013;keystore /usr/lib/jvm/java-11-openjdk-amd64/lib/security/cacerts | grep [ALIASNAME]

serivce wildfly restart
</pre></div></div>

<ul>
  
<li>Um <tt>ipv6</tt> zu deaktivieren, geben Sie in der Konsole folgende Befehle ein:</li>
</ul>

<div class="source">
<div class="source"><pre class="prettyprint">sudo sysctl -w net.ipv6.conf.all.disable_ipv6=1
sudo sysctl -w net.ipv6.conf.default.disable_ipv6=1
sudo sysctl -w net.ipv6.conf.lo.disable_ipv6=1

sudo sysctl -p
</pre></div></div>

<ul>
  
<li>Ein Proxy-Server muss im Wildfly h&#xe4;ndisch konfiguriert werden. Da die Netzwerkverbindung &#xfc;ber Java l&#xe4;uft, muss der Proxy als JAVA_OPT unter <tt>/opt/wildfly/bin/standalone.conf</tt> eingetragen werden. F&#xfc;gen Sie am Ende der Datei folgenden Eintrag hinzu. Nicht ben&#xf6;tigte Felder k&#xf6;nnen dabei weggelassen werden:</li>
</ul>

<div class="source">
<div class="source"><pre class="prettyprint">JAVA_OPTS=&quot;$JAVA_OPTS -Dhttps.proxyHost=xxx.x.x.xx -Dhttps.proxyPort=xxxx -Dhttps.proxyUser=MY_LOGIN -Dhttps.proxyPassword=MY_PASSWORD -Dhttp.proxyHost=xxx.x.x.xx -Dhttp.proxyPort=xxxx -Dhttp.proxyUser=MY_LOGIN -Dhttp.proxyPassword=MY_PASSWORD&quot;
</pre></div></div>

<ul>
  
<li>Um den CDA Import &#xfc;ber HTTPS zu verschl&#xfc;sseln, m&#xfc;ssen Sie zun&#xe4;chst &#xfc;ber den Befehl <tt>htpasswd</tt> einen neuen User f&#xfc;r die Authentifizierung anlegen. Wichtig ist dabei, den User aufgrund von Berechtigungsproblemen nicht unter <tt>/root/</tt> anzulegen und auch nicht im Verzeichnis des Webservers selbst, da die Datei von au&#xdf;en ausgelesen werden k&#xf6;nnte. Legen Sie den User daher am besten unter <tt>/home/</tt> ab. Mit dem fertigen User k&#xf6;nnen Sie nun festlegen, welche Pfade im Apache eine Authentifizierung ben&#xf6;tigen. &#xd6;ffnen Sie hierf&#xfc;r die Konfiguration des Apache Webclients &#xfc;ber den Befehl <tt>nano /etc/apache2/sites-available/000-default.conf</tt> (in manchen F&#xe4;llen auch nur default.conf) und f&#xfc;gen Sie unter dem Eintrag <tt>DocumentRoot /var/www/html</tt> folgenden Block hinzu:</li>
</ul>

<div class="source">
<div class="source"><pre class="prettyprint">&lt;Location /aktin/cda/fhir/Binary&gt;
AuthUserFile /home/&lt;Linux-User/.passwd&gt;
AuthName &quot;Password Protected&quot;
AuthType Basic
require valid-user
&lt;/Location&gt;
</pre></div></div>
<p>Speicher Sie die Datei ab und starten Sie den apache2-Server &#xfc;ber den Befehl <tt>service apache2 restart</tt> neu. Nun ist der Pfad f&#xfc;r den CDA Import nur noch &#xfc;ber eine Authentifizierung des angelegten Users zug&#xe4;nglich.</p></div></div></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                                      <p >Copyright &copy;                   2013&#x2013;2025.
          All rights reserved.    
      </p>
                </div>

        
                </div>
    </footer>
        </body>
</html>
