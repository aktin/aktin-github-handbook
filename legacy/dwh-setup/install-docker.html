<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.8.1 at 2025-06-16 
 | Rendered using Apache Maven Fluido Skin 1.5
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20250616" />
    <meta http-equiv="Content-Language" content="en" />
    <title>AKTIN : DWH Server &#x2013; </title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.5.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.5.min.js"></script>

                      </head>
        <body class="topBarDisabled">
          
        
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2>AKTIN : DWH Server</h2>
                </div>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
              
                  <li id="publishDate">Last Published: 2025-06-16
                      <span class="divider">|</span>
                   </li>
                  <li id="projectVersion">Version: 1.6rc1
                      </li>
                      
              
      
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
              
                <ul class="nav nav-list">
                    <li class="nav-header">Import, CDA und Schnittstelle</li>
                              
      <li>
  
                          <a href="../../0.18/dwh-import/index.html" title="DHW-Import und Schnittstelle">
          <span class="none"></span>
        DHW-Import und Schnittstelle</a>
            </li>
                              <li class="nav-header">Übersicht</li>
                              
      <li>
  
                          <a href="index.html" title="AKTIN Übersicht">
          <span class="none"></span>
        AKTIN Übersicht</a>
            </li>
                              <li class="nav-header">Installation</li>
                              
      <li>
  
                          <a href="install-requirements.html" title="Server-Installation">
          <span class="none"></span>
        Server-Installation</a>
            </li>
                
      <li>
  
                          <a href="install-script.html" title="AKTIN Installation">
          <span class="none"></span>
        AKTIN Installation</a>
            </li>
                
      <li class="active">
  
            <a href="#"><span class="none"></span>Docker Installation</a>
          </li>
                              <li class="nav-header">Updates und Patches</li>
                              
      <li>
  
                          <a href="update-migration.html" title="Migration von Debian 8/CentOS 7">
          <span class="none"></span>
        Migration von Debian 8/CentOS 7</a>
            </li>
                
      <li>
  
                          <a href="update-script.html" title="Update von der Version 1.3/1.4">
          <span class="none"></span>
        Update von der Version 1.3/1.4</a>
            </li>
                
      <li>
  
                          <a href="update-auto.html" title="Update ab der Version 1.5">
          <span class="none"></span>
        Update ab der Version 1.5</a>
            </li>
                              <li class="nav-header">Sonstiges</li>
                              
      <li>
  
                          <a href="network.html" title="Netzwerk-Einstellungen">
          <span class="none"></span>
        Netzwerk-Einstellungen</a>
            </li>
                
      <li>
  
                          <a href="file-import-p21.html" title="Import von fallbasierten Behandlungsdaten">
          <span class="none"></span>
        Import von fallbasierten Behandlungsdaten</a>
            </li>
                              <li class="nav-header">Changelog</li>
                              
      <li>
  
                          <a href="changelog.html" title="Changelog">
          <span class="none"></span>
        Changelog</a>
            </li>
            </ul>
              
                
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span10" >
                                  
            <div class="section">
<div class="section">
<h3><a name="Installation_und_Konfiguration_des_AKTIN_Data_Warehouse"></a><u>Installation und Konfiguration des AKTIN Data Warehouse</u></h3>
<p>Diese Anleitung beschreibt die Installation, den Betrieb und die Wartung des <b>AKTIN Data Warehouse (DWH)</b> mit i2b2-Backend, WildFly-Applikationsserver und Apache-Webserver auf einem Linux-Host mittels Docker Compose. Sie richtet sich an <b>System-AdminstratorInnen einer IT Abteilung.</b></p></div></div>
<div class="section">
<h2><a name="a1._Voraussetzungen"></a>1. Voraussetzungen</h2>

<table border="0" class="table table-striped">
  <thead style="width:50%;">
    
<tr class="a">
      
<th>Komponente</th>
      
<th>Empfehlung</th>
      
<th>Hinweise</th>
    </tr>
  </thead>
  <tbody>
    
<tr class="b">
      
<td>Hardware</td>
      
<td>4 CPU, 8 GB RAM, min. 20 GB SSD/HDD</td>
      
<td>-</td>
    </tr>
    
<tr class="a">
      
<td>Linux-Server</td>
      
<td>Ubuntu 20.04/22.04/24.04 LTS</td>
      
<td>Getestet und empfohlen</td>
    </tr>
    
<tr class="b">
      
<td>Docker Engine</td>
      
<td>&#x2265; 24.0</td>
      
<td><a class="externalLink" href="https://docs.docker.com/engine/install/ubuntu/">Installationsanleitung</a></td>
    </tr>
    
<tr class="a">
      
<td>Docker Compose Plugin</td>
      
<td>&#x2265; 2.0</td>
      
<td><a class="externalLink" href="https://docs.docker.com/compose/install/linux/#install-using-the-repository">Installationsanleitung</a></td>
    </tr>
  </tbody>
</table>
<div class="section">
<h3><a name="Netzwerk-Anforderungen"></a>Netzwerk-Anforderungen</h3>

<ul>
  
<li><b>TCP-Port 80</b> verf&#xfc;gbar (oder alternativer Port via <tt>HTTP_PORT</tt>)</li>
  
<li>Ausgehende Internetverbindung zu <tt>github.com</tt></li>
  
<li>Durchgehende Verbindung zum AKTIN Broker:
  
<ul>
    
<li>Server: <tt>aktin-broker.klinikum.rwth-aachen.de</tt></li>
    
<li>IP-Adresse: <tt>134.130.15.160</tt></li>
    
<li>Port: <tt>443/tcp</tt></li>
  </ul></li>
</ul></div>
<div class="section">
<h3><a name="Empfohlene_Zusatzkonfiguration"></a>Empfohlene Zusatzkonfiguration</h3>

<ul>
  
<li>Statische IP-Adresse oder DNS-Alias</li>
  
<li>Firewall-Konfiguration mit Beschr&#xe4;nkung auf notwendige Ports</li>
  
<li>SSL/TLS-Zertifikat f&#xfc;r Produktionsumgebung</li>
</ul></div></div>
<div class="section">
<h2><a name="a2._Dateien__Verzeichnisstruktur"></a>2. Dateien &amp; Verzeichnisstruktur</h2>
<p>Erstellen Sie ein dediziertes Verzeichnis f&#xfc;r die Docker Compose-Konfiguration:</p>

<div class="source">
<div class="source"><pre class="prettyprint">sudo -i
mkdir -p /opt/docker-deploy/aktin-dwh/dwh1
cd /opt/docker-deploy/aktin-dwh/dwh1
</pre></div></div>
<p>Setzen Sie die entsprechenden Berechtigungen f&#xfc;r das Verzeichnis:</p>

<div class="source">
<div class="source"><pre class="prettyprint">chown -R $USER:$USER /opt/docker-deploy/aktin-dwh/
chmod 750 /opt/docker-deploy/aktin-dwh/dwh1
</pre></div></div></div>
<div class="section">
<h2><a name="a3._Anlegen_der_Compose_Datei_und_Secrets"></a>3. Anlegen der Compose Datei und Secrets</h2>
<div class="section">
<h3><a name="a3.1_Docker_Compose-Datei_herunterladen"></a>3.1 Docker Compose-Datei herunterladen</h3>

<div class="source">
<div class="source"><pre class="prettyprint">cd /opt/docker-deploy/aktin-dwh/dwh1
curl -LO https://github.com/aktin/docker-aktin-dwh/releases/latest/download/compose.yml
</pre></div></div></div>
<div class="section">
<h3><a name="a3.2_Datenbank_Password_erstellen"></a>3.2 Datenbank Password erstellen</h3>
<p>Generieren Sie ein sicheres Passwort und speichern Sie es in einer Secret-Datei:</p>

<div class="source">
<div class="source"><pre class="prettyprint"># Option 1: Automatische Generierung (empfohlen)
openssl rand -base64 32 &gt; secret.txt

# Option 2: Manuelle Eingabe
echo &quot;IhrSicheresPasswort123!&quot; &gt; secret.txt
</pre></div></div>
<p><b>Sicherheitshinweis:</b> Verwenden Sie ausschlie&#xdf;lich starke Passw&#xf6;rter mit mindestens 16 Zeichen, bestehend aus Gro&#xdf;- und Kleinbuchstaben, Zahlen und Sonderzeichen.</p></div>
<div class="section">
<h3><a name="a3.3_Umgebungsvariablen_konfigurieren_Optional"></a>3.3 Umgebungsvariablen konfigurieren (Optional)</h3>
<p>F&#xfc;r eine benutzerdefinierte Konfiguration f&#xfc;r den Port des Web-Interfaces erstellen Sie eine <tt>.env</tt>-Datei:</p>

<div class="source">
<div class="source"><pre class="prettyprint">echo &quot;HTTP_PORT=8080&quot; &gt; .env
</pre></div></div></div></div>
<div class="section">
<h2><a name="a4._Erstmaliges_Starten_des_AKTIN_DWH"></a>4. Erstmaliges Starten des AKTIN DWH</h2>
<div class="section">
<h3><a name="a4.1_Services_starten"></a>4.1 Services starten</h3>

<div class="source">
<div class="source"><pre class="prettyprint">cd /opt/docker-deploy/aktin-dwh/dwh1
docker compose up -d
</pre></div></div>
<p>Durch das Argument <tt>-d</tt> wird das DWH im Hintergrund gestartet. Wenn das System neu gestartet wird, started das DWH automatisch.</p></div>
<div class="section">
<h3><a name="a4.2_Container_verifizieren"></a>4.2 Container verifizieren</h3>
<p>&#xdc;berpr&#xfc;fen Sie den Status der Container:</p>

<div class="source">
<div class="source"><pre class="prettyprint">docker compose ps
</pre></div></div>
<p><b>Erwartete Ausgabe:</b> Alle Services sollten den Status <tt>healthy</tt> oder <tt>running</tt> aufweisen.</p></div>
<div class="section">
<h3><a name="a4.3_Erste_Verbindung"></a>4.3 Erste Verbindung</h3>
<p>Das Web-Interface ist nach erfolgreicher Installation unter folgender Adresse erreichbar:</p>

<ul>
  
<li><tt>http://[SERVER-IP]/aktin/admin</tt> (bei Standard-Port 80)</li>
  
<li><tt>http://[SERVER-IP]:[HTTP_PORT]/aktin/admin</tt> (bei benutzerdefiniertem Port)</li>
</ul></div></div>
<div class="section">
<h2><a name="a5._Systemkonfiguration"></a>5. Systemkonfiguration</h2>
<p>Stoppen Sie zun&#xe4;chst die Services f&#xfc;r die Konfigurations&#xe4;nderung:</p>

<div class="source">
<div class="source"><pre class="prettyprint">cd /opt/docker-deploy/aktin-dwh/dwh1
docker compose down
</pre></div></div>
<p>Bearbeiten Sie die Konfigurationsdatei entsprechend der <a href="install-script.html#Konfiguration_und_lokale_Einstellungen">Anleitung</a>:</p>

<div class="source">
<div class="source"><pre class="prettyprint">nano /var/lib/docker/volumes/dwh1_aktin_config/_data/aktin.properties
</pre></div></div>
<p>Starten Sie die Services nach der Konfiguration neu:</p>

<div class="source">
<div class="source"><pre class="prettyprint">docker compose up -d
</pre></div></div></div>
<div class="section">
<h2><a name="a6._Betrieb_und_Wartung"></a>6. Betrieb und Wartung</h2>
<div class="section">
<h3><a name="a6.1_System-Updates"></a>6.1 System-Updates</h3>
<p>F&#xfc;hren Sie regelm&#xe4;&#xdf;ig Updates der Docker-Images durch:</p>

<div class="source">
<div class="source"><pre class="prettyprint">cd /opt/docker-deploy/aktin-dwh/dwh1

# Services stoppen
docker compose down

# Neue Images laden
docker compose pull

# Services mit aktualisierten Images starten
docker compose up -d

# Ungenutzte Images entfernen (optional)
docker image prune
</pre></div></div></div>
<div class="section">
<h3><a name="a6.2_Monitoring_und_Logs"></a>6.2 Monitoring und Logs</h3>
<div class="section">
<h4><a name="Container-Status_berwachen"></a>Container-Status &#xfc;berwachen</h4>

<div class="source">
<div class="source"><pre class="prettyprint"># Alle Container anzeigen
docker compose ps

# Detaillierte Informationen
docker stats

# Health-Check-Status
docker compose top
</pre></div></div></div>
<div class="section">
<h4><a name="Log-Analyse"></a>Log-Analyse</h4>

<div class="source">
<div class="source"><pre class="prettyprint"># Alle Logs anzeigen
docker compose logs

# Logs eines spezifischen Services
docker logs {{CONTAINER_NAME}}

# Live-Logs verfolgen
docker logs -f {{CONTAINER_NAME}}

# Logs mit Pagination
docker logs {{CONTAINER_NAME}} | less
</pre></div></div>
<p>Den Namen des entsprechenden Containers entnehmen Sie dem Befehl <tt>docker ps</tt></p></div></div>
<div class="section">
<h3><a name="a6.3_Service-Management"></a>6.3 Service-Management</h3>

<div class="source">
<div class="source"><pre class="prettyprint"># Einzelnen Service neustarten
# {{SERVICE}} muss durch wildfly, httpd oder database ersetzt werden
docker compose restart {{SERVICE}}

# Alle Services neustarten
docker compose restart

# Services stoppen
docker compose stop
</pre></div></div></div></div>
<div class="section">
<h2><a name="a7._Weiterfhrende_Dokumentation"></a>7. Weiterf&#xfc;hrende Dokumentation</h2>

<ul>
  
<li><b>GitHub Repository:</b> <a class="externalLink" href="https://github.com/aktin/docker-aktin-dwh">https://github.com/aktin/docker-aktin-dwh</a></li>
  
<li><b>Docker Dokumentation:</b> <a class="externalLink" href="https://docs.docker.com">https://docs.docker.com</a></li>
</ul></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                                      <p >Copyright &copy;                   2013&#x2013;2025.
          All rights reserved.    
      </p>
                </div>

        
                </div>
    </footer>
        </body>
</html>
